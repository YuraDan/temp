<div>
	<div class="modal-header">
		<h3 class="modal-title"><span translate>Address</span>: {{address.name}}</h3>
	</div>
	<div class="modal-body">
		<form name="addressForm" novalidate>
			<!-- OKATO -->
			<div class="form-group row">
				<div class="col-sm-4">
					<label translate>OKATO</label>
				</div>
				<div class="col-sm-8">
					<p class="input-group input-group-sm">

						<ui-select ng-model="address.okato" theme="select2" style="width: 450px;">
							<ui-select-match placeholder="" allow-clear="true">
								{{address.okato.code}} ({{address.okato.name}})
							</ui-select-match>
							<ui-select-choices repeat="okato in availableOKATOs | filter: {code: $select.search}"
											   refresh="refreshAvailableOKATOsByCode($select.search)"
											   refresh-delay="0">
								{{okato.name}} ({{okato.code}})
								<div ng-bind-html="okato.code"></div>
							</ui-select-choices>
						</ui-select>
					</p>
				</div>
			</div>
			<div>
				<!-- OKTMO -->
				<div class="form-group row">
					<div class="col-sm-4">
						<label translate>OKTMO</label>
					</div>
					<div class="col-sm-8">
						<p class="input-group input-group-sm">

							<ui-select ng-model="address.oktmo" theme="select2" style="width: 450px;">
								<ui-select-match placeholder="" allow-clear="true">
									{{address.oktmo.code}} ({{address.oktmo.name}})
								</ui-select-match>
								<ui-select-choices repeat="oktmo in availableOKTMOs | filter: {code: $select.search}"
												   refresh="refreshAvailableOKTMOsByCode($select.search)"
												   refresh-delay="0">
									{{oktmo.code}} ({{oktmo.name}})
									<div ng-bind-html="oktmo.code"></div>
								</ui-select-choices>
							</ui-select>

						</p>
					</div>
				</div>

				<!-- Postal Index -->
				<div class="form-group row">
					<div class="col-sm-4">
						<label translate>Address.postalIndex</label>
					</div>
					<div class="col-sm-8">
						<input type="text" class="form-control" name="address.postalCode"
							   ng-model="address.postalCode"/>
					</div>
				</div>

				<!-- Subject -->
				<div class="form-group row">
					<div class="col-sm-4">
						<label translate>Address.Subject</label>
					</div>
					<div class="col-sm-8">
						<p class="input-group input-group-sm">

							<ui-select ng-model="address.subject" theme="select2" style="width: 450px;"
									   on-select="subjectSelected()"
									>
								<ui-select-match placeholder="">{{address.subject.name}}</ui-select-match>
								<ui-select-choices repeat="item in availableSubjects | filter: {name: $select.search}"
												   refresh="refreshAvailableSubjects($select.search)"
												   refresh-delay="0">
									{{item.socr}} {{item.name}} ({{item.code}})
									<div ng-bind-html="item.name"></div>
								</ui-select-choices>
							</ui-select>

						</p>
					</div>
				</div>

				<!-- Region -->
				<div class="form-group row">
					<div class="col-sm-4">
						<label translate>Address.Region</label>
					</div>
					<div class="col-sm-8">
						<p class="input-group input-group-sm">

							<ui-select ng-model="address.region" theme="select2" style="width: 450px;"
									   on-select="regionSelected()"
									>
								<ui-select-match placeholder="">{{address.region.name}}</ui-select-match>
								<ui-select-choices repeat="item in availableRegions | filter: {name: $select.search}"
												   refresh="refreshAvailableRegions($select.search)"
												   refresh-delay="0">
									{{item.socr}} {{item.name}} ({{item.code}})
									<div ng-bind-html="item.name"></div>
								</ui-select-choices>
							</ui-select>

						</p>
					</div>
				</div>

				<!-- Locality -->
				<div class="form-group row">
					<div class="col-sm-4">
						<label translate>Address.Locality</label>
					</div>
					<div class="col-sm-8">
						<p class="input-group input-group-sm">

							<ui-select ng-model="address.locality" theme="select2" style="width: 450px;"
									   on-select="localitySelected()"
									>
								<ui-select-match placeholder="">{{address.locality.name}}</ui-select-match>
								<ui-select-choices repeat="item in availableLocalities | filter: {name: $select.search}"
												   refresh="refreshAvailableLocalities($select.search)"
												   refresh-delay="0">
									{{item.socr}} {{item.name}} ({{item.code}})
									<div ng-bind-html="item.name"></div>
								</ui-select-choices>
							</ui-select>

						</p>
					</div>
				</div>

				<!-- Street -->
				<div class="form-group row">
					<div class="col-sm-4">
						<label translate>Address.Street</label>
					</div>
					<div class="col-sm-8">
						<p class="input-group input-group-sm">

							<ui-select ng-model="address.street" theme="select2" style="width: 450px;"
									   on-select="streetSelected()"
									>
								<ui-select-match placeholder="">{{address.street.name}}</ui-select-match>
								<ui-select-choices repeat="item in availableStreets | filter: {name: $select.search}"
												   refresh="refreshAvailableStreets($select.search)"
												   refresh-delay="0">
									{{item.socr}} {{item.name}} ({{item.code}})
									<div ng-bind-html="item.name"></div>
								</ui-select-choices>
							</ui-select>

						</p>
					</div>
				</div>

				<!-- Level1: Home -->
				<div class="form-group row">
					<div class="col-sm-4">
						<label translate>Address.Home</label>
					</div>
					<div class="col-sm-8">
						<input type="text" class="form-control" name="addressHome" ng-model="address.home"
							   typeahead="availableHome for availableHome in refreshAvailableHomes()"/>
					</div>
				</div>

				<!-- Level2: Housing -->
				<div class="form-group row">
					<div class="col-sm-4">
						<label translate>Address.Housing</label>
					</div>
					<div class="col-sm-8">
						<input type="text" class="form-control" name="addressHousing" ng-model="address.housing"
							   typeahead="availableHousing for availableHousing in refreshAvailableHousings()"/>
					</div>
				</div>

				<!-- Level3: Flat -->
				<div class="form-group row">
					<div class="col-sm-4">
						<label translate>Address.Building</label>
					</div>
					<div class="col-sm-8">
						<input type="text" class="form-control" name="addressBuilding" ng-model="address.building"
							   typeahead="availableBuilding for availableBuilding in refreshAvailableBuildings()"/>
					</div>
				</div>

				<!-- Apartment -->
				<div class="form-group row">
					<div class="col-sm-4">
						<label translate>Address.Apartment</label>
					</div>
					<div class="col-sm-8">
						<input type="text" class="form-control" name="addressApartment" ng-model="address.apartment"
							   typeahead="availableApartment for availableApartment in refreshAvailableApartments()"/>
					</div>
				</div>

				<!-- other -->
				<div class="form-group row">
					<div class="col-sm-4">
						<label translate>Address.Other</label>
					</div>
					<div class="col-sm-8">
						<input type="text" class="form-control" name="addressOther"
							   ng-model="address|addressOtherFormater"
							   typeahead="availableOther for availableOther in refreshAvailableOther()"/>
					</div>
				</div>

		</form>
	</div>
</div>

<div class="modal-footer">
	<button type="submit" class="btn btn-primary" ng-disabled="addressForm.$invalid" ng-click="ok()" translate>
		Submit
	</button>
	<button type="button" class="btn btn-default" ng-click="cancel()" translate>Cancel</button>
</div>

